//#Desafio1- Conversor de Graus Celsius para Farenheint e Vice-versa


//para testar a solução, basta usar a função "conversor()", passando o seu valor em graus como entrada,
//ou ainda dar um "node desafio1.js"

//expressões regulares que servirão para validar a entrada
//a primeira valida os número usados na entrada
const regexNum = /[0-9]/,
    //servirá para saber se são graus Farenheint, "$" é um quantificador, e serve para dizer que está no
    //final da string, a flag "i" faz com que não sejam diferenciadas maiúsculas e minúsculas
    regexFar = /f$/i,
    //servirá para saber se são graus Celcius
    regexCel = /c$/i;

const inputMain = require('readline');
const rl = inputMain.createInterface({
    input: process.stdin,
    output: process.stdout
});

rl.question('Informe o valor a ser convertido(com ou sem unidade de medida):', (entrada) =>{
    testeFar = regexFar.test(entrada);
    testeCel = regexCel.test(entrada);
    valorFinal = '';
    if (testeFar == false && testeCel == false){
        console.log('sem unidade');
        valorFinal = semUnidade(entrada);
    }else{
        console.log('com unidade');
        valorFinal = conversor(entrada);
    }
    console.log('O valor convertido é de: ' + valorFinal);
    rl.close();
});

//caso não seja informada a unidade
function semUnidade(valor) {
    result = '';
    rl.question('Informe a unidade de medida (F para farenheint ou C para celcius', (unit) =>{
        switch (unit) {
            case 'c':
            case 'C':
                num = cToF(valor);
                result = num.toString()+'F';
                break;
            case 'F':
            case 'f':
                num = fToC(valor);
                result = num.toString()+'C';
                break;
            default:
                console.log('Entrada Inválida');
                break;
        }
        rl.close();
    });
    return result
}
//função que fará a conversão apropriada de acordo com a entrada
function conversor(graus){
    testeFar = regexFar.test(graus);
    testeNum = regexNum.test(graus);
    testeCel = regexCel.test(graus);
    result = '';
    if (testeFar && testeNum){
        console.log('F to C');
        //filtra a string
        array = graus.match(regexNum);
        valor = parseInt(array);

        //converte o valor obtido
        result = fToC(valor) + 'C';
    }else{
        console.log('C to F');
        //filtra a string
        array = graus.match(regexNum);
        valor = parseInt(array);
        //converte o valor obtido
        result = cToF(valor) + 'F';
    };
    return result;
}

//função que converte Farenheint para Celcius
function fToC(x){
    result = (x-32)/1.8;
    return result
}

//função que converte Celcius para Farenheint
function cToF(x){
    result = (1.8*x)+32;
    return result
}